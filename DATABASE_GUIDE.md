# æ•°æ®åº“ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ“Š åŠŸèƒ½æ¦‚è¿°

RandomItemPVP æ’ä»¶ç°åœ¨æ”¯æŒå®Œæ•´çš„ç©å®¶ç»Ÿè®¡æ•°æ®ç³»ç»Ÿï¼Œå¯ä»¥è®°å½•ï¼š
- âœ… èƒœåˆ©/å¤±è´¥æ¬¡æ•°
- âœ… å‡»æ€/æ­»äº¡æ•°
- âœ… KDæ¯”ç‡
- âœ… èƒœç‡
- âœ… æ€»æ¸¸æˆåœºæ¬¡

## ğŸ—„ï¸ æ”¯æŒçš„æ•°æ®åº“

### SQLiteï¼ˆé»˜è®¤ï¼‰
- **ä¼˜ç‚¹**ï¼šæ— éœ€é¢å¤–é…ç½®ï¼Œè‡ªåŠ¨åˆ›å»ºæœ¬åœ°æ•°æ®åº“æ–‡ä»¶
- **é€‚åˆ**ï¼šå°å‹æœåŠ¡å™¨ï¼ˆ1-50äººï¼‰
- **é…ç½®**ï¼š
```yaml
database:
  type: SQLITE
  sqlite:
    file: 'plugins/RandomItemPVP/data.db'
```

### MySQL
- **ä¼˜ç‚¹**ï¼šæ€§èƒ½å¼ºå¤§ï¼Œæ”¯æŒå¤šæœåŠ¡å™¨å…±äº«æ•°æ®
- **é€‚åˆ**ï¼šä¸­å¤§å‹æœåŠ¡å™¨ï¼ˆ50+äººï¼‰æˆ–è·¨æœæ•°æ®å…±äº«
- **é…ç½®**ï¼š
```yaml
database:
  type: MYSQL
  mysql:
    host: 'localhost'
    port: 3306
    database: 'randomitempvp'
    username: 'root'
    password: 'password'
    properties:
      useSSL: false
      autoReconnect: true
      serverTimezone: 'Asia/Shanghai'
      allowPublicKeyRetrieval: true
      useTimezone: true
    pool:
      maximum-pool-size: 10
      minimum-idle: 2
```

## ğŸ“ MySQL æ•°æ®åº“è®¾ç½®

### 1. åˆ›å»ºæ•°æ®åº“
```sql
CREATE DATABASE randomitempvp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 2. åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ
```sql
CREATE USER 'ripvp'@'localhost' IDENTIFIED BY 'ä½ çš„å¯†ç ';
GRANT ALL PRIVILEGES ON randomitempvp.* TO 'ripvp'@'localhost';
FLUSH PRIVILEGES;
```

### 3. ä¿®æ”¹é…ç½®æ–‡ä»¶
ç¼–è¾‘ `config.yml`ï¼Œå°†æ•°æ®åº“ç±»å‹æ”¹ä¸º MYSQL å¹¶å¡«å†™è¿æ¥ä¿¡æ¯ã€‚

### 4. é‡å¯æœåŠ¡å™¨
æ’ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ã€‚

## ğŸ® æ¸¸æˆå†…å‘½ä»¤

### æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
```
/ripvp stats          - æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡
/ripvp stats <ç©å®¶>   - æŸ¥çœ‹æŒ‡å®šç©å®¶çš„ç»Ÿè®¡
```

æ˜¾ç¤ºå†…å®¹ï¼š
- èƒœåˆ©/å¤±è´¥æ¬¡æ•°
- æ€»åœºæ¬¡å’Œèƒœç‡
- å‡»æ€/æ­»äº¡æ•°
- KDæ¯”ç‡

### æŸ¥çœ‹æ’è¡Œæ¦œ
```
/ripvp top            - æŸ¥çœ‹èƒœåˆ©æ’è¡Œæ¦œï¼ˆé»˜è®¤ï¼‰
/ripvp top wins       - æŸ¥çœ‹èƒœåˆ©æ’è¡Œæ¦œ
/ripvp top kills      - æŸ¥çœ‹å‡»æ€æ’è¡Œæ¦œ
/ripvp top kd         - æŸ¥çœ‹KDæ¯”ç‡æ’è¡Œæ¦œ
```

æ’è¡Œæ¦œç‰¹æ€§ï¼š
- æ˜¾ç¤ºå‰10åç©å®¶
- ğŸ¥‡ğŸ¥ˆğŸ¥‰ å¥–ç‰Œæ˜¾ç¤ºï¼ˆå‰ä¸‰åï¼‰
- KDæ’è¡Œæ¦œéœ€è¦è‡³å°‘10åœºæ¸¸æˆæ‰èƒ½ä¸Šæ¦œ

## ğŸ“Š æ•°æ®ç»Ÿè®¡è§„åˆ™

### èƒœåˆ©
- æœ€åå­˜æ´»çš„ç©å®¶è·å¾—èƒœåˆ©

### å¤±è´¥
- æ­»äº¡çš„ç©å®¶è®°å½•å¤±è´¥
- ä¸­é€”é€€å‡ºçš„ç©å®¶è®°å½•å¤±è´¥
- æ¸¸æˆç»“æŸæ—¶æœªè·èƒœçš„ç©å®¶è®°å½•å¤±è´¥

### å‡»æ€
- å‡»æ€å…¶ä»–ç©å®¶æ—¶è®°å½•

### æ­»äº¡
- è¢«å‡»æ€æ—¶è®°å½•

### åœºæ¬¡ç»Ÿè®¡
- æ¯æ¬¡å‚ä¸æ¸¸æˆå¹¶å®Œæˆï¼ˆèƒœåˆ©æˆ–å¤±è´¥ï¼‰è®¡ä¸º1åœº

## ğŸ”§ æ•°æ®åº“è¡¨ç»“æ„

```sql
CREATE TABLE player_stats (
    uuid VARCHAR(36) PRIMARY KEY,      -- ç©å®¶UUID
    player_name VARCHAR(16) NOT NULL,  -- ç©å®¶åç§°
    wins INT DEFAULT 0,                -- èƒœåˆ©æ¬¡æ•°
    losses INT DEFAULT 0,              -- å¤±è´¥æ¬¡æ•°
    kills INT DEFAULT 0,               -- å‡»æ€æ•°
    deaths INT DEFAULT 0,              -- æ­»äº¡æ•°
    games_played INT DEFAULT 0,        -- æ€»åœºæ¬¡
    last_played BIGINT DEFAULT 0       -- æœ€åæ¸¸ç©æ—¶é—´
);
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### SQLite ä¼˜åŒ–
- è‡ªåŠ¨ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ç¼“å­˜
- å•è¿æ¥æ± ï¼ˆSQLiteç‰¹æ€§ï¼‰

### MySQL ä¼˜åŒ–
- HikariCP é«˜æ€§èƒ½è¿æ¥æ± 
- é¢„ç¼–è¯‘è¯­å¥ç¼“å­˜
- å¼‚æ­¥æ•°æ®åº“æ“ä½œï¼ˆä¸å½±å“æ¸¸æˆæ€§èƒ½ï¼‰
- ç´¢å¼•ä¼˜åŒ–ï¼ˆwins, killså­—æ®µï¼‰

## ğŸ”„ æ•°æ®è¿ç§»

### ä» SQLite è¿ç§»åˆ° MySQL

1. å¯¼å‡ºSQLiteæ•°æ®ï¼š
```bash
sqlite3 plugins/RandomItemPVP/data.db .dump > backup.sql
```

2. è½¬æ¢SQLè¯­æ³•ï¼ˆSQLite â†’ MySQLï¼‰ï¼š
- ç§»é™¤ `BEGIN TRANSACTION;` å’Œ `COMMIT;`
- å°† `TEXT` æ”¹ä¸º `VARCHAR`
- å°† `INTEGER` æ”¹ä¸º `INT`

3. å¯¼å…¥åˆ°MySQLï¼š
```bash
mysql -u ripvp -p randomitempvp < backup.sql
```

4. ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸ºMYSQLç±»å‹

5. é‡å¯æœåŠ¡å™¨

## âš™ï¸ è¿æ¥å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ |
|------|------|--------|
| `useSSL` | æ˜¯å¦ä½¿ç”¨SSLè¿æ¥ | `false`ï¼ˆæœ¬åœ°æ•°æ®åº“ï¼‰ |
| `autoReconnect` | è‡ªåŠ¨é‡è¿ | `true` |
| `serverTimezone` | æœåŠ¡å™¨æ—¶åŒº | `Asia/Shanghai` |
| `allowPublicKeyRetrieval` | å…è®¸å…¬é’¥æ£€ç´¢ | `true`ï¼ˆMySQL 8.0+å¿…é¡»ï¼‰ |
| `useTimezone` | ä½¿ç”¨æ—¶åŒº | `true` |
| `maximum-pool-size` | æœ€å¤§è¿æ¥æ•° | `10` |
| `minimum-idle` | æœ€å°ç©ºé—²è¿æ¥ | `2` |

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥
**A**: æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š
1. MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ
2. ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
3. æ•°æ®åº“æ˜¯å¦å­˜åœ¨
4. ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥æ•°æ®åº“
5. é˜²ç«å¢™æ˜¯å¦å…è®¸è¿æ¥

### Q: æ•°æ®ä¸åŒæ­¥
**A**: 
- æ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä½†ä¼šç«‹å³æ‰§è¡Œ
- å¦‚æœå‡ºç°å»¶è¿Ÿï¼Œå¯èƒ½æ˜¯æ•°æ®åº“è´Ÿè½½è¿‡é«˜

### Q: æƒ³è¦é‡ç½®æ‰€æœ‰ç»Ÿè®¡æ•°æ®
**A**: 
```sql
-- SQLite
DELETE FROM player_stats;

-- MySQL
TRUNCATE TABLE player_stats;
```

### Q: æƒ³è¦åˆ é™¤æŸä¸ªç©å®¶çš„æ•°æ®
**A**:
```sql
DELETE FROM player_stats WHERE uuid = 'ç©å®¶UUID';
```

## ğŸ“ˆ æœªæ¥è®¡åˆ’

- [ ] æ›´å¤šç»Ÿè®¡ç»´åº¦ï¼ˆæœ€é•¿è¿æ€ã€ä½¿ç”¨æœ€å¤šçš„ç‰©å“ç­‰ï¼‰
- [ ] èµ›å­£ç³»ç»Ÿï¼ˆæŒ‰æœˆ/å‘¨é‡ç½®æ’è¡Œæ¦œï¼‰
- [ ] æˆå°±ç³»ç»Ÿ
- [ ] ç½‘é¡µç»Ÿè®¡é¢æ¿

## ğŸ’¡ æŠ€æœ¯ç»†èŠ‚

### ä¾èµ–åº“
- `sqlite-jdbc 3.45.1.0` - SQLiteé©±åŠ¨
- `mysql-connector-j 8.3.0` - MySQLé©±åŠ¨
- `HikariCP 5.1.0` - è¿æ¥æ± 

### å¼‚æ­¥æ“ä½œ
æ‰€æœ‰æ•°æ®åº“å†™å…¥æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œç¡®ä¿æ¸¸æˆæµç•…è¿è¡Œã€‚

### æ•°æ®ä¸€è‡´æ€§
- ä½¿ç”¨UUIDä½œä¸ºä¸»é”®ï¼Œé˜²æ­¢ç©å®¶æ”¹åå¯¼è‡´æ•°æ®ä¸¢å¤±
- è‡ªåŠ¨æ›´æ–°ç©å®¶åç§°
- äº‹åŠ¡æ”¯æŒï¼ˆMySQLï¼‰


